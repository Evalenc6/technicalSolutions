<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Database ER Diagram</title>

  <!-- Mermaid.js CDN -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background-color: #f7f9fb;
      color: #222;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .mermaid {
      background: white;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
  </style>
</head>

<body>
  <h1>ER Diagram â€” Technical Solutions Database</h1>

    <div class="mermaid">
    erDiagram
        %%{init: {'er': { 'layoutDirection': 'TD' }}}%%
        
        PERSON {
            int UserID PK
            varchar Username "Unique, Not Null"
            varchar FName
            varchar LName
            varchar Email "Unique"
            varchar urlLinkToID 
            date DOB
            varchar PasswordHash "Unique, Not Null"
            varchar SessionToken "Unique"
            varchar RefreshToken "Unique"
            datetime SessionTokeExpDate 
            datetime RefreshTokenExpDate 
            enum UserType "Manager / Employee / User"
        }
        FILE_UPLOAD {
          int FileID PK
          int UploadedBy FK
          varchar FileName
          varchar FileURL
          varchar FileType
          datetime UploadedAt
          text Description
        }


        USERS {}
        EMPLOYEE {}
        MANAGER {}

        ASSIGNMENT {}
        ORDERS {
            bigint OrderID PK
            int OrderedBy FK
            varchar ToLocation
            varchar FromLocation
            int DeviceCount
            decimal TotalPrice
            enum Status "Pending / Processing / Completed / Canceled"
            boolean Imaging
            boolean AssetTagging
            boolean DomainSetup
            text Applications
        }
        DEVICES {
            int DeviceID PK
            bigint OrderID FK
            varchar DeviceType FK
            varchar AssignedEmployee FK
            varchar ServiceTag
            bigint FixedAssetTag
            datetime DateCreated
            enum Status "In Progress / Ready / Deployed / Retired"
            file deviceInfoPDF
        }
        
        DEVICETYPES{
          int DeviceTypeID PK
          UserID addedBy FK
          varchar DeviceName "Unique, Not Null"
          text CPU
          text GPU
          text RAM
          text Storage
          text Display
          text Battery
          text Ports
          text Screen
        }

        

        PERSON ||--|{ EMPLOYEE : "is a"
        PERSON ||--|{ MANAGER : "is a"
        PERSON ||--|{ USERS   : "is a"

        EMPLOYEE }o--|| MANAGER : "managed_by"

        MANAGER ||--o{ ASSIGNMENT : "creates"
        MANAGER ||--o{ DEVICETYPES : "adds"

        ASSIGNMENT }o--|| EMPLOYEE : "assigned_to"
        ASSIGNMENT }o--|| DEVICES  : "includes"

        USERS ||--o{ ORDERS : "places"
        ORDERS ||--o{ DEVICES : "contains"
        MANAGER ||--o{ EMPLOYEE : "manages"

        PERSON ||--o{ FILE_UPLOAD : "uploads"

        DEVICES ||--|| DEVICETYPES : "is a"
        DEVICETYPES ||--|| ORDERS : "has"
    </div>
</body>
</html>
